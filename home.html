<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Charlotte & Gianluca — Home</title>

<!-- FONT -->
<link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@300;400;500;600&family=Allura&display=swap" rel="stylesheet">

<!-- === GLOBAL LOGIN STYLE & MODAL (popup) === -->
<style>
/* Overlay scuro dietro al popup */
#guestLoginOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: none; /* nascosto di default */
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
  font-family: "Cormorant", serif;
}

/* Box popup */
#guestLoginModal {
  background: #fff;
  max-width: 360px;
  width: 100%;
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0,0,0,.25);
  padding: 24px 20px 20px;
  position: relative;
  text-align: center;
  border: 1px solid rgba(0,0,0,.06);
}

/* Titolo popup */
#guestLoginModal h2 {
  font-family: "Allura", cursive;
  font-size: 32px;
  line-height: 1.2;
  color: var(--accent);
  margin: 0 0 10px;
}

/* Testo descrizione */
#guestLoginModal p {
  font-size: 18px;
  line-height: 1.4;
  margin: 0 0 16px;
  color: var(--ink);
  font-style: italic;
}

/* Form campi */
.guest-field {
  text-align: left;
  margin-bottom: 14px;
}
.guest-field label {
  display: block;
  font-size: 16px;
  margin-bottom: 4px;
  color: var(--muted);
}
.guest-field input {
  width: 100%;
  font-size: 18px;
  font-family: "Cormorant", serif;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #ccc;
  outline: none;
}
.guest-field input:focus {
  border-color: var(--accent);
}

/* Pulsanti nel popup */
#guestLoginActions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 18px;
}

/* Bottone Conferma */
#guestConfirmBtn {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 600;
  padding: 12px;
  cursor: pointer;
  font-family: "Cormorant", serif;
}
#guestConfirmBtn:hover {
  opacity: .95;
}

/* Link Esci / Logout */
#guestLogoutBtn {
  background: none;
  border: none;
  color: var(--muted);
  font-size: 16px;
  text-decoration: underline;
  cursor: pointer;
  font-family: "Cormorant", serif;
}

/* Messaggio di errore nome non trovato */
#guestError {
  color: #b00020;
  font-size: 16px;
  text-align: center;
  display: none;
  margin-top: 8px;
  line-height: 1.4;
  font-family: "Cormorant", serif;
}
</style>

  
<style>
:root{
  --accent:#7465ad;
  --beige:#f7f4ef;
  --ink:#242424;
  --muted:#6b6b6b;
}
*{box-sizing:border-box}
html,body{
  height:100%;
  margin:0;
  font-family:"Cormorant",serif;
  color:var(--ink);
  background:var(--beige);
  background-image:
    radial-gradient(1200px 700px at 100% -10%, rgba(116,101,173,.10), transparent 60%),
    radial-gradient(900px 500px at -10% 10%, rgba(116,101,173,.06), transparent 55%);
  background-attachment:fixed;
}

/* HEADER BASE (stesso stile tutte le pagine) */
header {
  position:sticky;
  top:0;
  z-index:10;
  background:rgba(247,244,239,.88);
  backdrop-filter:blur(6px);
  border-bottom:1px solid rgba(0,0,0,.06);
  font-family:"Cormorant", serif;
}

.nav {
  max-width:1100px;
  margin:0 auto;
  padding:18px 22px;
  display:flex;
  align-items:center; /* centra verticalmente nomi/data/menu */
  justify-content:space-between;
  gap:12px;
}

/* brand = blocco sinistra header */
.brand {
  display:flex;
  align-items:center;
  flex-wrap:nowrap;
  gap:8px;
}

.names {
  font-family:"Allura", cursive;
  font-size:36px;
  line-height:1.1;
  color:var(--accent);
  white-space:nowrap;
}

.dot {
  color:var(--muted);
  font-size:20px;
  line-height:1.1;
}

.date {
  color:var(--muted);
  font-size:20px;
  line-height:1.1;
  letter-spacing:.4px;
  font-weight:500;
  white-space:nowrap;
}

/* MENU DESKTOP */
nav ul {
  list-style:none;
  display:flex;
  gap:24px;
  margin:0;
  padding:0;
}

nav a {
  text-decoration:none;
  color:var(--ink);
  opacity:.95;
  font-size:19px;
  line-height:1;
  padding:8px 6px;
  border-radius:10px;
  font-family:"Cormorant", serif;
}

nav a:hover {
  opacity:1;
  border-bottom:1px solid var(--accent);
}

/* Bottone RSVP nel menu */
nav li.cta a {
  background:var(--accent);
  color:#fff;
  padding:10px 14px;
  border-radius:14px;
  border-bottom:none;
  font-weight:500;
  line-height:1.1;
}

nav li.cta a:hover {
  opacity:.95;
  transform:translateY(-1px);
}

/* HAMBURGER (mobile) */
.hamburger {
  display:none;
  border:1px solid rgba(0,0,0,.1);
  background:#fff;
  border-radius:10px;
  padding:8px 10px;
  cursor:pointer;
}
.hamburger span {
  display:block;
  width:20px;
  height:2px;
  background:#444;
  margin:4px 0;
}

/* MENU MOBILE POPUP */
.mobile-menu {
  display:none;
  position:fixed;
  top:64px;
  left:16px; /* <-- PRIMA era right:16px */
  right:auto; /* <-- per sicurezza azzeriamo l'altro lato */
  background:#fff;
  border:1px solid rgba(0,0,0,.06);
  border-radius:16px;
  box-shadow:0 8px 40px rgba(0,0,0,.12);
  padding:12px;
  z-index:40;
}

.mobile-menu a {
  display:block;
  padding:10px 12px;
  border-radius:10px;
  color:var(--ink);
  text-decoration:none;
  font-family:"Cormorant", serif;
  font-size:18px;
}
.mobile-menu a:hover {
  background:rgba(116,101,173,.08);
}

/* HERO (blocco principale con lavanda, data, countdown) */
.hero {
  text-align:center;
  padding:60px 20px 30px;
}

.hero-img-wrapper {
  max-width:600px;     /* puoi aumentare tipo 600px */
  margin:0 auto 20px;  /* centra l'immagine e aggiunge spazio sotto */
}

.hero-img {
  display:block;
  width:100%;
  height:auto;
}

.date-line {
  font-family:"Cormorant", serif;
  font-size:20px;
  color:var(--muted);
  margin:0 0 18px;
  font-style:italic;
}

/* Countdown wrapper */
.countdown {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 14px;
  flex-wrap: wrap;
  margin: 20px auto 0;     /* centra */
  max-width: 520px;        /* <-- LIMITE larghezza su desktop */
  width: 100%;
}

/* Ogni box del countdown */
.cd-box {
  flex: 1 1 auto;
  min-width: 110px;
  background:#fff;
  border:1px solid #eee;
  border-radius:14px;
  padding:12px 14px;
  text-align:center;
  box-shadow:0 10px 28px rgba(0,0,0,.06);
}

/* Numeri grandi */
.cd-num {
  font-size:30px;
  font-weight:600;
  color:var(--accent);
  line-height:1;
}

/* Etichetta Days / Hours / Minutes / Seconds */
.cd-label {
  font-size:12px;
  color:var(--muted);
  letter-spacing:.4px;
  text-transform:uppercase;
  margin-top:4px;
}

/* Mobile: su telefoni piccoli vogliamo che possano andare su due colonne */
@media (max-width:500px) {
  .countdown {
    max-width: 100%;
    justify-content: center;
  }
  .cd-box {
    min-width: 44%;
    flex: 1 1 44%;
  }
}


/* bottone RSVP sotto il countdown */
.btn{
  display:inline-block;
  background:var(--accent);
  color:#fff;
  text-decoration:none;
  padding:12px 22px;
  border-radius:16px;
  font-weight:600;
  font-family:"Cormorant", serif;
}
.btn:hover{opacity:.95}

/* Sezione lingue con blocchi */
.section{
  max-width:900px;
  margin:0 auto;
  padding:40px 20px 80px;
  text-align:center;
}

.lang-block{
  background:#fff;
  border-radius:18px;
  border:1px solid #eee;
  padding:24px;
  margin-top:24px;
}

/* Titolo tipo Benvenuti / Welcome / Bienvenue */
.lang-block h2{
  margin:0 0 10px;
  font-family:"Allura", cursive;
  font-size:42px;
  font-weight:400;
  color:var(--accent);
  line-height:1.2;
}

.lang-block p{
  margin:0 0 14px;
  font-family:"Cormorant", serif;
  font-size:18px;
  color:var(--ink);
  line-height:1.4;
}

/* Footer */
footer{
  text-align:center;
  color:#6b6b6b;
  padding:40px 20px;
  font-size:14px;
}

/* RESPONSIVE */
@media(max-width:600px){
  .nav {
    width:100%;
    padding:16px 12px;
  }
  .hamburger { display:block; }
  nav ul { display:none; }
  .names { font-size:30px; }
  .date  { font-size:17px; }

  .mobile-menu {
    top:58px;
    left:12px;   /* spostato a sinistra */
    right:auto;  /* niente più right */
  }
}

  .cd-box{ min-width:44%; }
  nav a{ font-size:18px; padding:10px 8px; }
}
</style>
</head>
<body>

  <!-- === LOGIN MODAL OVERLAY (popup iniziale e per logout) === -->
<div id="guestLoginOverlay" role="dialog" aria-modal="true">
  <div id="guestLoginModal">

    <!-- Titolo -->
    <h2>Welcome · Bienvenue · Benvenuti</h2>

    <!-- Testo: chiediamo nome e cognome, senza spiegare il motivo -->
    <p>
      Please enter your first and last name.<br>
      Veuillez saisir votre prénom et nom.<br>
      Inserisci nome e cognome.
    </p>

    <!-- CAMPO NOME -->
    <div class="guest-field">
      <label for="guestFirst">Name · Prénom · Nome</label>
      <input type="text" id="guestFirst" placeholder="Charlotte / Gianluca / ..." />
    </div>

    <!-- CAMPO COGNOME -->
    <div class="guest-field">
      <label for="guestLast">Surname · Nom · Cognome</label>
      <input type="text" id="guestLast" placeholder="Francis / Guardalà / ..." />
    </div>

    <!-- ERROR MSG -->
    <div id="guestError">
      Name not recognized.<br>
      Nom non reconnu.<br>
      Nome non trovato.
    </div>

    <!-- AZIONI -->
    <div id="guestLoginActions">
      <button id="guestConfirmBtn">OK</button>
      <button id="guestLogoutBtn" style="display:none;">Log out / Déconnexion / Esci</button>
    </div>

  </div>
</div>


<header>
  <div class="nav">
    <div class="brand">
      <button id="hambBtn" class="hamburger" aria-label="Open menu">
        <span></span><span></span><span></span>
      </button>
      <div class="names">Charlotte &amp; Gianluca</div>
      <div class="dot">·</div>
      <div class="date">June 20, 2026</div>
    </div>

    <nav>
      <ul>
        <li><a href="/home.html">Home</a></li>
        <li><a href="/story.html">Our story</a></li>
        <li><a href="/stay.html">Plan your trip</a></li>
        <li><a href="/trip.html">Honeymoon</a></li>
        <li class="cta"><a href="/rsvp.html">RSVP</a></li>
      </ul>
    </nav>
  </div>

  <div id="mobileMenu" class="mobile-menu">
    <a href="/home.html">Home</a>
    <a href="/story.html">Our story</a>
    <a href="/stay.html">Plan your trip</a>
    <a href="/trip.html">Honeymoon</a>
    <a href="/rsvp.html"><strong>RSVP</strong></a>
  </div>
</header>

<main>
  <section class="hero">
    <!-- immagine lavanda + nomi -->
    <div class="hero-img-wrapper">
      <img
        src="/assets/hero-lavanda.jpg"
        alt="Charlotte & Gianluca"
        class="hero-img"
        loading="lazy"
        decoding="async"
      />
    </div>


    <!-- Countdown -->
    <div id="countdown" class="countdown" aria-label="Countdown to the wedding">
      <div class="cd-box">
        <div class="cd-num" id="cd-days">—</div>
        <div class="cd-label">Days</div>
      </div>
      <div class="cd-box">
        <div class="cd-num" id="cd-hours">—</div>
        <div class="cd-label">Hours</div>
      </div>
      <div class="cd-box">
        <div class="cd-num" id="cd-mins">—</div>
        <div class="cd-label">Minutes</div>
      </div>
      <div class="cd-box">
        <div class="cd-num" id="cd-secs">—</div>
        <div class="cd-label">Seconds</div>
      </div>
    </div>

   <p class="date-line">20.06.2026 — Château de Pradines, Grambois</p>

    <div style="margin-top:18px">
      <a href="/rsvp.html" class="btn">RSVP</a>
    </div>
  </section>

  <section class="section">
    <div class="lang-block">
      <h2>🇮🇹 Benvenuti</h2>
      <p>Siamo felicissimi di invitarvi al nostro matrimonio in Provenza! 🌿</p>
      <p>Vi aspettiamo per un weekend di festa, tra profumi di lavanda e brindisi sotto le stelle.</p>
      <p><a class="btn" href="/stay.html">Pianifica il tuo viaggio!</a></p>
    </div>

    <div class="lang-block">
      <h2>🇫🇷 Bienvenue</h2>
      <p>Nous sommes ravis de vous inviter à notre mariage en Provence ! 💜</p>
      <p>Un week-end de fête, de lavande et de moments inoubliables sous les étoiles.</p>
      <p><a class="btn" href="/stay.html">Organisez votre voyage !</a></p>
    </div>

    <div class="lang-block">
      <h2>🇬🇧 Welcome</h2>
      <p>We’re thrilled to invite you to our wedding in Provence! 🌸</p>
      <p>Join us for a weekend of celebration, lavender scents and starry skies.</p>
      <p><a class="btn" href="/stay.html">Plan your trip!</a></p>
    </div>
    
  </section>
</main>

<footer>
  <small>© Charlotte &amp; Gianluca — 2026</small>
</footer>

<script>
/* Mobile menu toggle */
(function(){
  const btn=document.getElementById('hambBtn');
  const menu=document.getElementById('mobileMenu');
  if(btn&&menu){
    btn.addEventListener('click',e=>{
      e.stopPropagation();
      menu.style.display = (menu.style.display==='block')?'none':'block';
    });
    document.addEventListener('click',e=>{
      if(menu.style.display==='block' && !menu.contains(e.target) && e.target!==btn){
        menu.style.display='none';
      }
    });
  }
})();

/* Countdown to 2026-06-20 16:30 Europe/Rome */
(function(){
  const dEl=document.getElementById('cd-days');
  const hEl=document.getElementById('cd-hours');
  const mEl=document.getElementById('cd-mins');
  const sEl=document.getElementById('cd-secs');
  const target=new Date('2026-06-20T16:30:00+02:00').getTime();
  function tick(){
    const now=Date.now(); let diff=Math.max(0,target-now);
    const d=Math.floor(diff/86400000); diff-=d*86400000;
    const h=Math.floor(diff/3600000);  diff-=h*3600000;
    const m=Math.floor(diff/60000);    diff-=m*60000;
    const s=Math.floor(diff/1000);
    dEl.textContent=d;
    hEl.textContent=String(h).padStart(2,'0');
    mEl.textContent=String(m).padStart(2,'0');
    sEl.textContent=String(s).padStart(2,'0');
  }
  tick(); setInterval(tick,1000);
})();
</script>

<script>
/* ===========================================================
   LISTA INVITATI "VIP" (quelli che vedranno welcome dinner & brunch)
   - Qui normalizziamo i nomi in minuscolo e senza accenti/puntini
   - IMPORTANTE: se aggiungi qualcuno, aggiungilo seguendo questo formato:
     "nome cognome"
     Se il cognome è vuoto (tipo "Bénédict"), metti solo il nome.
   =========================================================== */

const VIP_GUESTS = [
  "charlotte francis",
  "yves francis",
  "laurence hoppe",
  "chloe francis",
  "maya mertens",
  "chiara regalia",
  "matteo biroli",
  "chiara sestini",
  "riccardo magri",
  "marta vitro",
  "mattia marco",
  "andrea rodriguez",
  "piero giuriolo",
  "pietro favari",
  "elisa ferrantelli",
  "francesco santermosi",
  "viviana serdoz",
  "francesca garoia",
  "malve malvestio",
  "attilia la vecchia",
  "stefano de looper",
  "clara simon",
  "marine lesage",
  "thomas hulet",
  "nicola delle foglie",
  "baptiste charvat",
  "liza bibakova",
  "iphigenie loukakis",
  "sara nyssen",
  "koen slingerland",
  "gianluca guardala",      // guardalà → guardala
  "francesca arduini",
  "benedict",               // Bénédict → benedict
  "isidoro guardala",
  "simona guardala",
  "alessando guardala",
  "irene guardala",
  "patrick guardala",
  "emanuela zannetti",
  "andrea perozziello",
  "ragazza perroz",
  "fabio tarricone",
  "gisella martino capeda",
  "edoardo cutolo",
  "giorgia piras",
  "edoardo papini",
  "vittorio corti",
  "benedetta barbaresi",
  "giacomo gussoni",
  "matteo rossi",
  "lucrezia piracci",
  "davide bellotto",
  "silvia oltrabella",
  "ludovico sibani",        // Sìbani → sibani
  "silvia pignotti",
  "benedetta testoni",
  "giovanni de maria",
  "edoardo ferrario",
  "alessandro bianchi",
  "beatrice villa",
  "luca caravaggi",
  "mara moschino",
  "marzia camapnile",       // campanile?
  "nikola calic",
  "filippo sugla",          // sug|lia -> gestiamolo più robusto sotto
  "camilla russo",
  "laerte adami",
  "noemi",
  "alberto garlaschelli",
  "jacopo guarneri",
  "lorenzo cederna",
  "benedetta pintus"
];

/* Per sicurezza, aggiungiamo una funzione per normalizzare accenti,
   spazi multipli, casi speciali tipo "Suglia" / "Sugla".
   Usiamo una funzione di "slugify" molto semplice.
*/
function normalizeName(str){
  if(!str) return "";
  // minuscolo
  let s = str.toLowerCase().trim();

  // normalizza accenti
  s = s.normalize("NFD").replace(/[\u0300-\u036f]/g, ""); // rimuove diacritici

  // sostituzioni manuali: se vogliamo sistemare errori tipo "suglia" / "sugla"
  s = s.replace(/\bsuglia\b/g,"sugla");
  s = s.replace(/\bguardalà\b/g,"guardala");
  s = s.replace(/\bguardalà\b/g,"guardala");

  // togli spazi doppi
  s = s.replace(/\s+/g," ");

  return s;
}

/* ===========================================================
   LOGIN LOGICA
   - Mostriamo il popup se NON abbiamo già salvato lo stato
   - Quando confermano, salviamo in localStorage:
     { guestName: "nome cognome", isVIP: true/false }
   - Se uno fa logout, cancelliamo e ri-mostriamo popup
   - In base a isVIP mostriamo blocchi VIP nelle pagine
   =========================================================== */

const STORAGE_KEY = "weddingGuestInfo"; // localStorage key

function getGuestInfo(){
  try {
    return JSON.parse(localStorage.getItem(STORAGE_KEY)) || null;
  } catch(e){
    return null;
  }
}

function setGuestInfo(obj){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));
}

function clearGuestInfo(){
  localStorage.removeItem(STORAGE_KEY);
}

/* Mostra popup login */
function showLoginModal(){
  const overlay = document.getElementById("guestLoginOverlay");
  const errorMsg = document.getElementById("guestError");
  const logoutBtn = document.getElementById("guestLogoutBtn");

  if(overlay){
    overlay.style.display = "flex";
  }
  if(errorMsg){
    errorMsg.style.display = "none";
  }
  if(logoutBtn){
    logoutBtn.style.display = "none";
  }
}

/* Mostra popup logout (cioè "sei loggato, vuoi uscire?") */
function showLogoutModal(guest){
  const overlay = document.getElementById("guestLoginOverlay");
  const modal   = document.getElementById("guestLoginModal");
  const errorMsg= document.getElementById("guestError");
  const first   = document.getElementById("guestFirst");
  const last    = document.getElementById("guestLast");
  const confirm = document.getElementById("guestConfirmBtn");
  const logout  = document.getElementById("guestLogoutBtn");

  if(!overlay||!modal) return;

  // Cambiamo leggermente il testo per dire chi è loggato
  modal.querySelector("h2").textContent = guest.guestName;
  modal.querySelector("p").innerHTML = `
    You are signed in.<br>
    Vous êtes connecté(e).<br>
    Sei collegato/a.
  `;

  // Nascondiamo i campi nome/cognome perché sei già loggato
  if(first) first.parentElement.style.display = "none";
  if(last)  last.parentElement.style.display  = "none";

  // Nascondi eventuale errore
  if(errorMsg) errorMsg.style.display = "none";

  // Mostra bottone logout
  if(logout) logout.style.display = "block";

  // Cambia testo bottone principale:
  if(confirm) {
    confirm.textContent = "Close / Fermer / Chiudi";
  }

  overlay.style.display = "flex";
}

/* Ripristina il popup in modalità LOGIN (nomi visibili) */
function resetModalToLogin(){
  const overlay = document.getElementById("guestLoginOverlay");
  const modal   = document.getElementById("guestLoginModal");
  const first   = document.getElementById("guestFirst");
  const last    = document.getElementById("guestLast");
  const confirm = document.getElementById("guestConfirmBtn");
  const logout  = document.getElementById("guestLogoutBtn");
  const errorMsg= document.getElementById("guestError");

  if(!overlay||!modal) return;

  modal.querySelector("h2").textContent = "Welcome · Bienvenue · Benvenuti";
  modal.querySelector("p").innerHTML = `
    Please enter your first and last name.<br>
    Veuillez saisir votre prénom et nom.<br>
    Inserisci nome e cognome.
  `;

  // Mostra campi
  if(first) {
    first.parentElement.style.display = "block";
    first.value = "";
  }
  if(last) {
    last.parentElement.style.display  = "block";
    last.value = "";
  }

  // Nascondi messaggio errore
  if(errorMsg) errorMsg.style.display="none";

  // Bottone principale "OK"
  if(confirm){
    confirm.textContent = "OK";
  }

  // Nascondi logout
  if(logout){
    logout.style.display = "none";
  }
}

/* Prova login */
function tryLogin(){
  const first = document.getElementById("guestFirst").value || "";
  const last  = document.getElementById("guestLast").value  || "";
  const errorMsg = document.getElementById("guestError");
  const overlay  = document.getElementById("guestLoginOverlay");

  const fullNameNormalized = normalizeName(first + " " + last);

  // Controllo se il nome è nella lista VIP
  const isVIP = VIP_GUESTS.includes(fullNameNormalized);

  // Salviamo comunque anche se non VIP,
  // così chi non è in lista può navigare il sito senza rivedere il popup ogni volta
  if(fullNameNormalized.length < 2){
    // nome troppo corto
    if(errorMsg){
      errorMsg.style.display = "block";
    }
    return;
  }

  // Salva stato in localStorage
  setGuestInfo({
    guestName: first.trim() + " " + last.trim(),
    isVIP: isVIP
  });

  // Chiudi overlay
  if(overlay){
    overlay.style.display = "none";
  }

  // Ora che sappiamo se è VIP, mostriamo eventuali sezioni VIP
  revealVIPSections(isVIP);
}

/* Logout */
function logoutGuest(){
  clearGuestInfo();
  resetModalToLogin();
  // Dopo il logout, ri-mostriamo in versione LOGIN
  showLoginModal();
  // Nascondiamo sezioni VIP per sicurezza
  revealVIPSections(false);
}

/* Mostra/nascondi le sezioni VIP nella pagina corrente */
function revealVIPSections(isVIP){
  const vipEls = document.querySelectorAll(".vip-only");
  vipEls.forEach(el=>{
    el.style.display = isVIP ? "" : "none";
  });
}

/* Setup iniziale quando la pagina carica */
document.addEventListener("DOMContentLoaded", function(){

  const overlay  = document.getElementById("guestLoginOverlay");
  const confirm  = document.getElementById("guestConfirmBtn");
  const logout   = document.getElementById("guestLogoutBtn");

  // 1. Leggi dal localStorage se c'è già un ospite
  const info = getGuestInfo();

  if(info){
    // Abbiamo già un utente
    // - NON mostriamo il popup subito
    // - ma mostriamo/nascondiamo blocchi VIP
    revealVIPSections(!!info.isVIP);

    // Aggiungiamo listener sul brand (o su qualcosa) per poter riaprire popup e fare logout
    // Suggerimento: click sul nome in header apre modal logout
    const brand = document.querySelector(".brand");
    if(brand){
      brand.style.cursor = "pointer";
      brand.addEventListener("click", ()=>{
        showLogoutModal(info);
      });
    }

  } else {
    // Nessun utente noto -> mostriamo subito popup in modalità LOGIN
    resetModalToLogin();
    showLoginModal();
  }

  // Listener "OK" nel popup (fa login o chiude se già loggato)
  if(confirm){
    confirm.addEventListener("click", ()=>{
      const currentInfo = getGuestInfo();
      if(currentInfo){
        // se sei già loggato e stai vedendo popup "sei collegato"
        // chiudiamo semplicemente
        if(overlay) overlay.style.display="none";
      } else {
        // stai cercando di loggarti
        tryLogin();
      }
    });
  }

  // Listener "Logout"
  if(logout){
    logout.addEventListener("click", ()=>{
      logoutGuest();
    });
  }

  // Se clicchi fuori dal box, chiudi SOLO se già loggato
  if(overlay){
    overlay.addEventListener("click", (e)=>{
      if(e.target===overlay){
        const currentInfo = getGuestInfo();
        // se NON loggato non chiudere
        if(currentInfo){
          overlay.style.display="none";
        }
      }
    });
  }
});
</script>


  
</body>
</html>
