<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RSVP ‚Äî Charlotte & Gianluca</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&family=Great+Vibes&display=swap" rel="stylesheet">
<style>
:root{--lavender:#7a78b3;--lavender-600:#6a68a3;--olive:#8a9a5b;--beige:#f7f4ef;--ink:#242424;--muted:#6b6b6b}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;font-family:"Cormorant Garamond",Georgia,"Times New Roman",serif;color:var(--ink);background:var(--beige);
  background-image:radial-gradient(1200px 700px at 100% -10%, rgba(122,120,179,.12), transparent 60%),
                   radial-gradient(900px 500px at -10% 10%, rgba(183,181,217,.18), transparent 55%),
                   radial-gradient(700px 400px at 60% 110%, rgba(138,154,91,.08), transparent 60%);background-attachment:fixed}
header{width:100%;position:sticky;top:0;z-index:20;backdrop-filter:blur(6px);background:rgba(247,244,239,.7);border-bottom:1px solid rgba(0,0,0,.05)}
.nav{max-width:1100px;margin:0 auto;padding:14px 20px;display:flex;align-items:center;justify-content:space-between;gap:12px}
.brand{display:flex;align-items:baseline;gap:12px}
.brand .names{font-family:"Great Vibes","Brush Script MT",cursive;font-size:30px;letter-spacing:.3px;color:var(--lavender-600)}
.brand .dot{color:rgba(0,0,0,.35)}
nav ul{list-style:none;display:flex;gap:18px;margin:0;padding:0}
nav a{text-decoration:none;color:var(--ink);opacity:.85} nav a:hover{opacity:1;border-bottom:1px solid var(--lavender-600)}
.lang{display:flex;gap:8px;align-items:center}
.lang button{border:1px solid rgba(0,0,0,.08);background:white;border-radius:10px;padding:6px 10px;font-size:14px;cursor:pointer}
.hamburger{display:none;border:1px solid rgba(0,0,0,.1);background:white;border-radius:10px;padding:8px 10px;cursor:pointer}
.hamburger span{display:block;width:20px;height:2px;background:#444;margin:4px 0}
.mobile-menu{display:none;position:fixed;top:60px;right:14px;background:rgba(255,255,255,.98);border:1px solid rgba(0,0,0,.06);border-radius:16px;box-shadow:0 8px 40px rgba(0,0,0,.12);padding:14px;z-index:40}
.mobile-menu a{display:block;padding:10px 12px;border-radius:10px;color:var(--ink);text-decoration:none}
.mobile-menu a:hover{background:rgba(106,104,163,.08)}
.section{max-width:900px;margin:0 auto;padding:120px 20px 60px}
.section h2{font-weight:600;letter-spacing:.5px;color:var(--lavender-600);margin-bottom:10px}
.card{background:rgba(255,255,255,.7);border:1px solid rgba(0,0,0,.06);border-radius:18px;padding:18px;box-shadow:0 8px 30px rgba(106,104,163,.06)}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:18px}
.btn{display:inline-block;background:var(--lavender-600);color:#fff;padding:10px 16px;border-radius:14px;text-decoration:none;font-weight:600}
footer{color:var(--muted);text-align:center;padding:60px 20px}
@media (max-width:700px){nav ul{display:none}.hamburger{display:block}.grid-2{grid-template-columns:1fr}}
</style>
</head>
<body>
<header>
  <div class="nav">
    <div class="brand">
      <button id="hambBtn" class="hamburger" aria-label="Open menu"><span></span><span></span><span></span></button>
      <div class="names">Charlotte &amp; Gianluca</div><div class="dot">¬∑</div><div class="date">20 Giugno 2026</div>
    </div>
    <nav><ul>
      <li><a href="home.html">Home</a></li>
      <li><a href="story.html">La nostra storia</a></li>
      <li><a href="stay.html">Dove alloggiare</a></li>
      <li><a href="trip.html">Viaggio di nozze</a></li>
      <li><a href="rsvp.html">RSVP</a></li>
    </ul></nav>
    <div class="lang"><button>üáÆüáπ IT</button><button>üá¨üáß EN</button><button>üá´üá∑ FR</button></div>
  </div>
  <div id="mobileMenu" class="mobile-menu">
    <a href="home.html">Home</a><a href="story.html">La nostra storia</a><a href="stay.html">Dove alloggiare</a><a href="trip.html">Viaggio di nozze</a><a href="rsvp.html">RSVP</a>
  </div>
</header>

<main class="section">
  <h2>RSVP</h2>
  <p style="color:var(--muted);margin-bottom:12px;">Conferma la tua presenza. Il modulo √® personalizzato per te.</p>

  <!-- ‚úÖ Netlify Forms -->
  <form name="rsvp" method="POST" netlify netlify-honeypot="bot-field"
        action="/success.html" class="card" id="rsvpForm">
    <!-- alternativa equivalente: data-netlify="true" + hidden form-name -->
    <input type="hidden" name="form-name" value="rsvp" />
    <input type="hidden" name="invite_flags" id="inviteFlags" value="wedding" />
    <input type="hidden" name="guest_code" id="guestCode" value="" />
    <input type="hidden" name="lang" id="langField" value="it" />
    <input type="hidden" name="page" value="/rsvp.html" />
    <p style="display:none"><label>Don‚Äôt fill this out: <input name="bot-field" /></label></p>

    <div class="grid-2">
      <p><label for="name">Nome e cognome<br>
        <input id="name" name="name" type="text" required
               style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.15);background:white;">
      </label></p>
      <p><label for="email">Email<br>
        <input id="email" name="email" type="email" required
               style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.15);background:white;">
      </label></p>
    </div>

    <p id="attendingLabel" style="margin-top:6px;font-weight:600;">Parteciperai al matrimonio di Charlotte &amp; Gianluca?</p>
    <div class="grid-2" style="margin-bottom:8px">
      <label for="yes" class="card" style="display:flex;align-items:center;gap:10px;">
        <input id="yes" type="radio" name="attending" value="yes" required> <span>S√¨, con gioia</span>
      </label>
      <label for="no" class="card" style="display:flex;align-items:center;gap:10px;">
        <input id="no" type="radio" name="attending" value="no"> <span>Mi dispiace, non potr√≤</span>
      </label>
    </div>

    <!-- Queste righe compaiono SOLO se attending=yes -->
    <div id="attendingBlock" style="display:none">
      <div id="rowDinner" class="card" style="margin-top:12px;">
        <label for="dinner" style="display:flex;align-items:center;gap:10px;">
          <input id="dinner" type="checkbox" name="welcome_dinner" value="yes">
          <span>Parteciperai alla cena di benvenuto (venerd√¨ sera)?</span>
        </label>
      </div>

      <div id="rowBrunch" class="card" style="margin-top:12px;">
        <label for="brunch" style="display:flex;align-items:center;gap:10px;">
          <input id="brunch" type="checkbox" name="sunday_brunch" value="yes">
          <span>Parteciperai al brunch della domenica?</span>
        </label>
      </div>

      <div class="grid-2" style="margin-top:12px;">
        <p><label for="guests"><span>Numero totale di persone (incluso te)</span><br>
          <input id="guests" name="guests" type="number" min="1" max="10" value="1"
                 style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.15);background:white;">
        </label></p>

        <p><label for="dietary"><span>Allergie o esigenze alimentari</span><br>
          <input id="dietary" name="dietary" type="text" placeholder="es. vegetariano, senza glutine"
                 style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.15);background:white;">
        </label></p>
      </div>

      <!-- Nomi ospiti generati in base al numero -->
      <div id="guestNamesWrap" class="card" style="display:none; margin-top:12px;">
        <strong>Nome degli ospiti</strong>
        <div id="guestNames" style="margin-top:8px; display:grid; gap:8px;"></div>
      </div>
    </div>

    <p style="margin-top:12px;">
      <label for="message"><span>Messaggio (opzionale)</span><br>
        <textarea id="message" name="message" rows="4"
                  style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.15);background:white;"></textarea>
      </label>
    </p>
<!-- Netlify: dichiara SOLO i campi creati via JS (per il rilevamento) -->
<div style="display:none" aria-hidden="true">
  <input type="hidden" name="guest_2_name">
  <input type="hidden" name="guest_3_name">
  <input type="hidden" name="guest_4_name">
  <input type="hidden" name="guest_5_name">
  <input type="hidden" name="guest_6_name">
  <input type="hidden" name="guest_7_name">
  <input type="hidden" name="guest_8_name">
  <input type="hidden" name="guest_9_name">
  <input type="hidden" name="guest_10_name">
</div>

    <p><button type="submit" class="btn" id="submitBtn">Invia RSVP</button></p>
  </form>

  <p style="margin-top:10px;color:var(--muted);font-size:14px">
    Link di test: <a href="/rsvp.html?guest=demo&inv=all">versione ‚Äútutti gli eventi‚Äù</a>
  </p>
</main>

<footer><small>¬© Charlotte &amp; Gianluca ‚Äî 2026</small></footer>
<script>
// menu mobile
const btn=document.getElementById('hambBtn'), menu=document.getElementById('mobileMenu');
if(btn&&menu){btn.addEventListener('click',()=>{menu.style.display=(menu.style.display==='block')?'none':'block';});
document.addEventListener('click',e=>{if(!menu.contains(e.target)&&e.target!==btn) menu.style.display='none';});}

// Personalizzazione invito da URL (?guest=...&inv=wedding+dinner|wedding+brunch|all)
(function(){
  const p=new URLSearchParams(window.location.search);
  const inv=(p.get('inv')||'wedding').toLowerCase();
  const showDinner=inv==='all'||inv.includes('dinner');
  const showBrunch=inv==='all'||inv.includes('brunch');
  document.getElementById('inviteFlags').value=inv;
  const g=p.get('guest')||''; document.getElementById('guestCode').value=g;

  const dinner=document.getElementById('rowDinner');
  const brunch=document.getElementById('rowBrunch');
  if(dinner) dinner.style.display=showDinner?'block':'none';
  if(brunch) brunch.style.display=showBrunch?'block':'none';
})();

// Mostra blocchi extra solo se "Partecipo"
(function(){
  const yes=document.getElementById('yes');
  const no=document.getElementById('no');
  const block=document.getElementById('attendingBlock');
  function toggle(){ block.style.display = yes && yes.checked ? 'block' : 'none'; }
  ;[yes,no].forEach(r=>r&&r.addEventListener('change',toggle));
  toggle();
})();

// Genera i campi nome ospiti in base al numero
(function(){
  const guests=document.getElementById('guests');
  const wrap=document.getElementById('guestNamesWrap');
  const holder=document.getElementById('guestNames');
  function render(){
    const n=parseInt(guests?.value||'1',10);
    if(!holder) return;
    holder.innerHTML='';
    if(n>1){
      wrap.style.display='block';
      for(let i=2;i<=n;i++){
        const label=document.createElement('label');
        label.innerHTML = 'Ospite ' + i + ' ‚Äî Nome e cognome<br>' +
          '<input name="guest_'+i+'_name" type="text" style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.15);background:white;">';
        holder.appendChild(label);
      }
    }else{
      wrap.style.display='none';
    }
  }
  if(guests){ guests.addEventListener('input',render); render(); }
})();
</script>
</body>
</html>
