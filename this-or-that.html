<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vibe Cha vs Vibe Gianlu</title>
  <link href="https://fonts.googleapis.com/css2?family=Allura&family=Cormorant:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --lavender:#bca9e0;      /* soft lavender */
      --lavender-600:#9d87d1;  /* darker shade */
      --beige:#f7f3eb;         /* warm beige background */
      --ink:#2a2438;           /* deep ink for text */
      --muted:#7b6f8e;         /* muted for subtext */
      --white:#ffffff;         /* clean white */
    }

    *, *::before, *::after{ box-sizing:border-box; }
    html, body { height:100%; }
    body{
      margin:0;
      background:var(--beige);
      color:var(--ink);
      font-family:"Cormorant", serif;
      line-height:1.4;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .card{
      width:min(960px, 100%);
      background:var(--white);
      border:1px solid rgba(0,0,0,.06);
      border-radius:24px;
      box-shadow:0 10px 30px rgba(42,36,56,.08);
      overflow:hidden;
    }

    header{
      padding:28px 28px 14px;
      text-align:center;
      border-bottom:1px solid rgba(0,0,0,.06);
      background:linear-gradient(180deg, var(--lavender) 0%, #d6cbed 100%);
      color:#1f1536;
    }
    .subtitle{
      font-family:"Allura", cursive;
      font-size:30px;
      opacity:.95;
    }
    h1{
      margin:6px 0 0;
      font-size:40px;
      letter-spacing:.3px;
      font-weight:600;
    }

    .content{ padding:22px; }

    .meta{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-bottom:16px;
      color:var(--muted);
      font-size:18px;
    }

    .pill{
      background:var(--beige);
      border:1px solid rgba(0,0,0,.06);
      border-radius:999px;
      padding:6px 12px;
    }

    .question-box{
      border:1px solid rgba(0,0,0,.06);
      border-radius:20px;
      padding:22px;
      margin:12px 0 18px;
      background:#fff;
    }
    .question{
      font-size:28px;
      margin:0 0 18px;
      text-align:center;
    }

    .options{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
    }

    .option{
      border:2px solid var(--lavender);
      border-radius:18px;
      padding:18px;
      text-align:center;
      font-size:22px;
      cursor:pointer;
      user-select:none;
      transition:transform .06s ease, box-shadow .06s ease, background .2s ease, border-color .2s ease;
      background:#fff;
    }
    .option:hover{ transform:translateY(-1px); box-shadow:0 8px 20px rgba(188,169,224,.3); }
    .option:active{ transform:translateY(0); }
    .option.left { border-color: var(--lavender-600); }
    .option.right{ border-color: var(--lavender); }

    .footer-actions{
      display:flex; gap:10px; justify-content:center; margin-top:18px; flex-wrap:wrap;
    }
    button{
      border:none; cursor:pointer; padding:10px 14px; border-radius:12px; font-size:18px;
      background:var(--lavender-600); color:#fff; transition:filter .2s ease;
    }
    button.secondary{ background:#efe9fb; color:#3b2f5e; border:1px solid #e1d9f8; }
    button:hover{ filter:brightness(.95); }

    .progress{
      height:8px; background:#efe9fb; border-radius:999px; overflow:hidden; margin:12px 0 6px;
    }
    .bar{ height:100%; width:0%; background:var(--lavender-600); transition:width .25s ease; }

    .result{
      text-align:center; padding:8px 10px 2px;
    }
    .result h2{ font-size:34px; margin:0 0 6px; }
    .badges{ display:flex; gap:10px; justify-content:center; margin:10px 0 12px; flex-wrap:wrap; }
    .badge{ border:1px solid rgba(0,0,0,.08); background:var(--beige); padding:6px 10px; border-radius:999px; font-size:16px; }

    .percent-wrap{ display:flex; gap:10px; align-items:center; justify-content:center; margin-top:14px; }
    .pct{
      min-width:120px; border:1px solid rgba(0,0,0,.08); background:#fff; padding:8px 10px; border-radius:14px; font-size:20px;
    }

    footer{
      padding:16px 20px 22px; text-align:center; color:var(--muted); font-size:16px;
    }

    @media (max-width:640px){
      h1{ font-size:32px; }
      .question{ font-size:24px; }
      .option{ font-size:20px; }
    }
  </style>
</head>
<body>
  <div class="card" id="app">
    <header>
      <div class="subtitle">Cha & Gianlu</div>
      <h1>Vibe Cha vs Vibe Gianlu</h1>
    </header>

    <div class="content">
      <div class="meta">
        <div class="pill" id="counterPill">Question <span id="qIndex">1</span>/<span id="qTotal">10</span></div>
        <div class="pill">Left = Gianlu ðŸ§¢ Â· Right = Cha ðŸ’œ</div>
      </div>

      <div class="progress"><div class="bar" id="progressBar"></div></div>

      <div class="question-box" id="qBox">
        <p class="question" id="question">Loadingâ€¦</p>
        <div class="options">
          <div class="option left" id="optLeft"></div>
          <div class="option right" id="optRight"></div>
        </div>
      </div>

      <div class="footer-actions">
        <button class="secondary" id="restartBtn" type="button">Restart (shuffle)</button>
        <button id="shareBtn" type="button">Share result</button>
      </div>

      <div class="result" id="result" hidden>
        <h2 id="winner"></h2>
        <div class="percent-wrap">
          <div class="pct" id="gPct">Gianlu: 0%</div>
          <div class="pct" id="cPct">Cha: 0%</div>
        </div>
        <div class="badges" id="summary"></div>
      </div>
    </div>

    <footer>
      Crafted with ðŸ’œ & lavender vibes
    </footer>
  </div>

  <script>
    // ------------------ Data ------------------
    // NOTE: Keep left = Gianlu, right = Cha. Mapping decides who each option belongs to.
    const QUESTIONS_MASTER = [
      { q:"Morning energy?", left:"Sunrise run", right:"Slow coffee ritual", mapLeft:"g", mapRight:"c" },
      { q:"Trip style?", left:"Spontaneous road-trip", right:"Planned city-break", mapLeft:"g", mapRight:"c" },
      { q:"Dinner hero?", left:"Pasta night", right:"Sushi date", mapLeft:"g", mapRight:"c" },
      { q:"Weekend mood?", left:"Mountains & hikes", right:"Art museums", mapLeft:"g", mapRight:"c" },
      { q:"Holiday home?", left:"Sea-view cottage", right:"ProvenÃ§al mas", mapLeft:"g", mapRight:"c" },
      { q:"Romance cue?", left:"Surprise getaway", right:"Handwritten note", mapLeft:"g", mapRight:"c" },
      { q:"Party move?", left:"DJ requests", right:"Dance floor queen", mapLeft:"g", mapRight:"c" },
      { q:"Travel bag?", left:"Backpack", right:"Carry-on with cubes", mapLeft:"g", mapRight:"c" },
      { q:"Evening chill?", left:"Tennis highlights", right:"Book + tea", mapLeft:"g", mapRight:"c" },
      { q:"Sweet tooth?", left:"TiramisÃ¹", right:"Macarons", mapLeft:"g", mapRight:"c" }
    ];

    // ------------------ Utilities ------------------
    function shuffleInPlace(arr){
      // Fisherâ€“Yates for unbiased random order
      for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // ------------------ State ------------------
    let state = {
      questions: [],    // will be a shuffled copy of QUESTIONS_MASTER
      idx: 0,
      gScore: 0,
      cScore: 0,
      answers: []       // keep a compact log like {i, pick:"g"|"c"}
    };

    // ------------------ DOM ------------------
    const qIndex = document.getElementById('qIndex');
    const qTotal = document.getElementById('qTotal');
    const progressBar = document.getElementById('progressBar');
    const questionEl = document.getElementById('question');
    const optLeft = document.getElementById('optLeft');
    const optRight = document.getElementById('optRight');
    const resultBox = document.getElementById('result');
    const gPct = document.getElementById('gPct');
    const cPct = document.getElementById('cPct');
    const winner = document.getElementById('winner');
    const summary = document.getElementById('summary');
    const restartBtn = document.getElementById('restartBtn');
    const shareBtn = document.getElementById('shareBtn');

    qTotal.textContent = QUESTIONS_MASTER.length;

    // ------------------ Logic ------------------
    function startGame(){
      // fresh shuffled copy every time
      state.questions = shuffleInPlace([...QUESTIONS_MASTER]);
      state.idx = 0;
      state.gScore = 0;
      state.cScore = 0;
      state.answers = [];
      resultBox.hidden = true;
      document.getElementById('qBox').hidden = false;
      updateUI();
    }

    function updateUI(){
      const total = state.questions.length;
      const i = state.idx;
      qIndex.textContent = Math.min(i+1, total);
      const pct = Math.floor((i/total) * 100);
      progressBar.style.width = pct + '%';

      if(i >= total){
        showResult();
        return;
      }

      const item = state.questions[i];
      questionEl.textContent = item.q;
      optLeft.textContent = item.left;
      optRight.textContent = item.right;

      // enable clicks
      optLeft.onclick = () => pick('g');
      optRight.onclick = () => pick('c');
    }

    function pick(side){
      const item = state.questions[state.idx];
      // safety: respect mapping (left:Gianlu, right:Cha)
      if(side === 'g'){ state.gScore++; state.answers.push({i:state.idx, pick:'g', q:item.q}); }
      if(side === 'c'){ state.cScore++; state.answers.push({i:state.idx, pick:'c', q:item.q}); }
      state.idx++;
      updateUI();
    }

    function showResult(){
      // lock question box
      document.getElementById('qBox').hidden = true;

      const total = state.questions.length;
      const g = state.gScore;
      const c = state.cScore;
      const gPerc = Math.round((g/total)*100);
      const cPerc = Math.round((c/total)*100);

      gPct.textContent = `Gianlu: ${gPerc}%`;
      cPct.textContent = `Cha: ${cPerc}%`;
      winner.textContent = (gPerc === cPerc)
        ? "You're a perfect blend of Cha & Gianlu!"
        : (gPerc > cPerc ? "You vibe more like Gianlu ðŸ§¢" : "You vibe more like Cha ðŸ’œ");

      // quick playful summary (top 3 picks)
      summary.innerHTML = '';
      const pickedG = state.answers.filter(a => a.pick==='g').slice(0,3).map(a=>a.q);
      const pickedC = state.answers.filter(a => a.pick==='c').slice(0,3).map(a=>a.q);
      if(pickedG.length){
        const b = document.createElement('div');
        b.className = 'badge';
        b.textContent = `Gianlu picks: ${pickedG.join(' â€¢ ')}`;
        summary.appendChild(b);
      }
      if(pickedC.length){
        const b = document.createElement('div');
        b.className = 'badge';
        b.textContent = `Cha picks: ${pickedC.join(' â€¢ ')}`;
        summary.appendChild(b);
      }

      // full bar
      progressBar.style.width = '100%';
      qIndex.textContent = total;

      resultBox.hidden = false;
    }

    restartBtn.addEventListener('click', startGame);

    shareBtn.addEventListener('click', async () => {
      const url = location.href.split('#')[0];
      const title = 'Vibe Cha vs Vibe Gianlu';
      const text = winner.textContent + ` â€” ${gPct.textContent} Â· ${cPct.textContent}`;
      try{
        if(navigator.share){
          await navigator.share({ title, text, url });
        } else {
          await navigator.clipboard.writeText(`${title}\n${text}\n${url}`);
          shareBtn.textContent = 'Copied!';
          setTimeout(()=>shareBtn.textContent='Share result', 1200);
        }
      }catch(e){ /* user cancelled */ }
    });

    // kick off
    startGame();
  </script>
</body>
</html>
