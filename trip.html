<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Honeymoon â€” Charlotte & Gianluca</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@300;400;500;600&family=Allura&display=swap" rel="stylesheet">

  <!-- === GLOBAL LOGIN STYLE & MODAL (popup) === -->
<style>
/* Overlay scuro dietro al popup */
#guestLoginOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: none; /* nascosto di default */
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
  font-family: "Cormorant", serif;
}

/* Box popup */
#guestLoginModal {
  background: #fff;
  max-width: 360px;
  width: 100%;
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0,0,0,.25);
  padding: 24px 20px 20px;
  position: relative;
  text-align: center;
  border: 1px solid rgba(0,0,0,.06);
}

/* Titolo popup */
#guestLoginModal h2 {
  font-family: "Allura", cursive;
  font-size: 32px;
  line-height: 1.2;
  color: var(--accent);
  margin: 0 0 10px;
}

/* Testo descrizione */
#guestLoginModal p {
  font-size: 18px;
  line-height: 1.4;
  margin: 0 0 16px;
  color: var(--ink);
  font-style: italic;
}

/* Form campi */
.guest-field {
  text-align: left;
  margin-bottom: 14px;
}
.guest-field label {
  display: block;
  font-size: 16px;
  margin-bottom: 4px;
  color: var(--muted);
}
.guest-field input {
  width: 100%;
  font-size: 18px;
  font-family: "Cormorant", serif;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #ccc;
  outline: none;
}
.guest-field input:focus {
  border-color: var(--accent);
}

/* Pulsanti nel popup */
#guestLoginActions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 18px;
}

/* Bottone Conferma */
#guestConfirmBtn {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 600;
  padding: 12px;
  cursor: pointer;
  font-family: "Cormorant", serif;
}
#guestConfirmBtn:hover {
  opacity: .95;
}

/* Link Esci / Logout */
#guestLogoutBtn {
  background: none;
  border: none;
  color: var(--muted);
  font-size: 16px;
  text-decoration: underline;
  cursor: pointer;
  font-family: "Cormorant", serif;
}

/* Messaggio di errore nome non trovato */
#guestError {
  color: #b00020;
  font-size: 16px;
  text-align: center;
  display: none;
  margin-top: 8px;
  line-height: 1.4;
  font-family: "Cormorant", serif;
}
</style>


<style>
:root{
  --accent:#7465ad;
  --beige:#f7f4ef;
  --ink:#242424;
  --muted:#6b6b6b;
}
*{box-sizing:border-box}
html,body{
  height:100%;
  margin:0;
  font-family:"Cormorant",serif;
  color:var(--ink);
  background:var(--beige);
  background-image:
    radial-gradient(1200px 700px at 100% -10%, rgba(116,101,173,.10), transparent 60%),
    radial-gradient(900px 500px at -10% 10%, rgba(116,101,173,.06), transparent 55%);
  background-attachment:fixed;
}

/* HEADER BASE */
header{
  position:sticky;
  top:0;
  z-index:10;
  background:rgba(247,244,239,.88);
  backdrop-filter:blur(6px);
  border-bottom:1px solid rgba(0,0,0,.06);
  font-family:"Cormorant", serif;
}

.nav{
  max-width:1100px;
  margin:0 auto;
  padding:18px 22px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}

/* BLOCCO A SINISTRA (nomi e data) */
.brand{
  display:flex;
  align-items:center;
  flex-wrap:nowrap;
  gap:8px;
}
.names{
  font-family:"Allura", cursive;
  font-size:36px;
  line-height:1.1;
  color:var(--accent);
  white-space:nowrap;
}
.dot{
  color:var(--muted);
  font-size:20px;
  line-height:1.1;
}
.date{
  color:var(--muted);
  font-size:20px;
  line-height:1.1;
  letter-spacing:.4px;
  font-weight:500;
  white-space:nowrap;
}

/* MENU DESKTOP */
nav ul {
  list-style:none;
  display:flex;
  gap:24px;
  margin:0;
  padding:0;
}

nav a {
  text-decoration:none;
  color:var(--ink);
  opacity:.95;
  font-size:19px;
  line-height:1;
  padding:8px 6px;
  border-radius:10px;
  font-family:"Cormorant", serif;
}

nav a:hover {
  opacity:1;
  border-bottom:1px solid var(--accent);
}

/* RSVP evidenziato */
nav li.cta a {
  background:var(--accent);
  color:#fff;
  padding:10px 14px;
  border-radius:14px;
  border-bottom:none;
  font-weight:500;
  line-height:1.1;
}

nav li.cta a:hover {
  opacity:.95;
  transform:translateY(-1px);
}

/* HAMBURGER (mobile) */
.hamburger {
  display:none;
  border:1px solid rgba(0,0,0,.1);
  background:#fff;
  border-radius:10px;
  padding:8px 10px;
  cursor:pointer;
}
.hamburger span {
  display:block;
  width:20px;
  height:2px;
  background:#444;
  margin:4px 0;
}

/* MENU MOBILE POPUP */
.mobile-menu {
  display:none;
  position:fixed;
  top:64px;
  left:16px; /* <-- PRIMA era right:16px */
  right:auto; /* <-- per sicurezza azzeriamo l'altro lato */
  background:#fff;
  border:1px solid rgba(0,0,0,.06);
  border-radius:16px;
  box-shadow:0 8px 40px rgba(0,0,0,.12);
  padding:12px;
  z-index:40;
}

.mobile-menu a {
  display:block;
  padding:10px 12px;
  border-radius:10px;
  color:var(--ink);
  text-decoration:none;
  font-family:"Cormorant", serif;
  font-size:18px;
}
.mobile-menu a:hover {
  background:rgba(116,101,173,.08);
}

/* HERO TITLE DELLA PAGINA (Our story, RSVP, ecc.) */
.page-head {
  text-align: center;
  padding: 60px 20px 40px;
}

.page-head h1 {
  font-family: "Allura", cursive;
  font-size: 56px;
  color: var(--accent);
  margin: 0 0 10px;
  line-height: 1.2;
}

.page-head p {
  font-family: "Cormorant", serif;
  font-size: 22px;
  color: var(--muted);
  margin: 0;
  font-style: italic; /* <-- corsivo per il sottotitolo */
}

  
/* RESPONSIVE */
@media(max-width:600px){
  .nav {
    width:100%;
    padding:16px 12px;
  }
  .hamburger { display:block; }
  nav ul { display:none; }
  .names { font-size:30px; }
  .date  { font-size:17px; }

  .mobile-menu {
    top:58px;
    left:12px;   /* spostato a sinistra */
    right:auto;  /* niente piÃ¹ right */
  }
}



/* Page content */
.section{
  max-width:1100px;
  margin:0 auto;
  padding:86px 20px 60px
}

.h1{
  font-family:"Allura",cursive;
  font-size:56px;
  color:var(--accent);
  text-align:center;
  margin:10px 0 14px;
  line-height:1.1;
}

/* Mappa / immagine viaggio */
.frame{
  max-width:980px;
  margin:0 auto 24px;
  padding:0 20px;
}
.polaroid{
  display:block;
  width:100%;
  height:auto;
  background:#fff;
  border:10px solid #fff;
  border-bottom-width:22px;
  border-radius:6px;
  box-shadow:0 10px 30px rgba(0,0,0,.12),0 2px 8px rgba(0,0,0,.06);
  transform:rotate(-0.4deg);
}

/* Intro viaggio */
.trip-intro{
  max-width:800px;
  margin:0 auto 40px;
  padding:0 20px 10px;
  text-align:center;
  color:var(--ink);
  font-size:19px;
  line-height:1.5;
}
.trip-intro p{
  margin:0 0 14px;
}

/* Griglia sezioni contributo */
.contrib{
  max-width:900px;
  margin:0 auto;
  padding:0 20px;
  display:grid;
  gap:14px
}
.box{
  background:#fff;
  border:1px solid #eee;
  border-radius:16px;
  padding:18px
}
.head{
  font-weight:700;
  margin:0 0 6px 0;
  color:var(--accent);
  font-size:20px;
}
.box p{
  margin:0 0 10px;
  font-size:18px;
  line-height:1.5;
}
.box strong{
  font-weight:600;
  color:var(--ink);
}

/* Responsive */
@media(max-width:900px){
  .hamburger{display:block}
  nav ul{display:none}
  .brand .names{font-size:31px}
}
@media(max-width:700px){
  .h1{font-size:44px}
  .nav{padding:20px 16px}
  .mobile-menu{top:60px}
  nav a{font-size:18px;padding:10px 8px}
}
@media (max-width:1024px){
  nav a{font-size:clamp(18px,2.4vw,20px);padding:12px 10px}
  .brand .names{font-size:clamp(28px,3.2vw,35px)}
}


  
</style>
</head>

<body>

<!-- === LOGIN MODAL OVERLAY (popup iniziale e per logout) === -->
<div id="guestLoginOverlay" role="dialog" aria-modal="true">
  <div id="guestLoginModal">

    <!-- Titolo -->
    <h2>Welcome Â· Bienvenue Â· Benvenuti</h2>

    <!-- Testo: chiediamo nome e cognome, senza spiegare il motivo -->
    <p>
      Please enter your first and last name.<br>
      Veuillez saisir votre prÃ©nom et nom.<br>
      Inserisci nome e cognome.
    </p>

    <!-- CAMPO NOME -->
    <div class="guest-field">
      <label for="guestFirst">Name Â· PrÃ©nom Â· Nome</label>
      <input type="text" id="guestFirst" placeholder="Charlotte / Gianluca / ..." />
    </div>

    <!-- CAMPO COGNOME -->
    <div class="guest-field">
      <label for="guestLast">Surname Â· Nom Â· Cognome</label>
      <input type="text" id="guestLast" placeholder="Francis / GuardalÃ  / ..." />
    </div>

    <!-- ERROR MSG -->
    <div id="guestError">
      Name not recognized.<br>
      Nom non reconnu.<br>
      Nome non trovato.
    </div>

    <!-- AZIONI -->
    <div id="guestLoginActions">
      <button id="guestConfirmBtn">OK</button>
      <button id="guestLogoutBtn" style="display:none;">Log out / DÃ©connexion / Esci</button>
    </div>

  </div>
</div>

  
<header>
  <div class="nav">
    <div class="brand">
      <button id="hambBtn" class="hamburger" aria-label="Open menu">
        <span></span><span></span><span></span>
      </button>
      <div class="names">Charlotte &amp; Gianluca</div>
      <div class="dot">Â·</div>
      <div class="date">June 20, 2026</div>
    </div>
    <nav>
      <ul>
        <li><a href="/home.html">Home</a></li>
        <li><a href="/story.html">Our story</a></li>
        <li><a href="/stay.html">Plan your trip</a></li>
        <li><a href="/trip.html">Honeymoon</a></li>
        <li class="cta"><a href="/rsvp.html">RSVP</a></li>
      </ul>
    </nav>
  </div>

  <div id="mobileMenu" class="mobile-menu">
    <a href="/home.html">Home</a>
    <a href="/story.html">Our story</a>
    <a href="/stay.html">Plan your trip</a>
    <a href="/trip.html">Honeymoon</a>
    <a href="/rsvp.html"><strong>RSVP</strong></a>
  </div>
</header>

<main class="section">
  <h1 class="h1">Honeymoon</h1>

  <!-- immagine mappa / planisfero -->
  <div class="frame">
    <img class="polaroid"
         src="/assets/honeymoon-map.jpg"
         alt="Planisfero: Italia â†’ HawaiÊ»i â†’ Polinesia Francese"
         loading="lazy"
         decoding="async">
  </div>

  <!-- intro viaggio in 3 lingue -->
  <section class="trip-intro">
    <p><strong>ðŸ‡®ðŸ‡¹</strong> Il nostro viaggio di nozze sarÃ  tra Hawaii e Polinesia Francese ðŸŒº<br>
    Vulcani, spiagge nere, snorkeling, immersioni, nuotate con mante, balene e (forse) qualche squalo. Un giro in elicottero sopra i crateri attivi... e poi â€“ per la gioia di Charlotte â€“ tanto tanto sole e relax.</p>

    <p><strong>ðŸ‡¬ðŸ‡§</strong> Our honeymoon will take us from HawaiÊ»i to French Polynesia ðŸŒ´<br>
    Volcanoes, black-sand beaches, snorkeling, diving, swimming with manta rays, whales and (maybe) a few sharks. A helicopter ride over active craters... and then Charlotteâ€™s favourite part: lots of sun, and lots of doing nothing.</p>

    <p><strong>ðŸ‡«ðŸ‡·</strong> Notre voyage de noces nous emmÃ¨nera dâ€™HawaÃ¯ Ã  la PolynÃ©sie franÃ§aise ðŸŒŠ<br>
    Volcans, plages de sable noir, snorkeling, plongÃ©e, nager avec des raies manta, des baleines et (peut-Ãªtre) quelques requins. Un vol en hÃ©licoptÃ¨re au-dessus des cratÃ¨res actifsâ€¦ puis, pour le plus grand plaisir de Charlotte : du soleil, et du repos.</p>
  </section>

  <!-- sezione contributo regalo -->
  <div class="contrib">
  <div class="box">
    <p class="head">ðŸ‡®ðŸ‡¹ Italiano</p>
    <p><strong>Vuoi contribuire al nostro viaggio?</strong><br>
      Il regalo piÃ¹ bello Ã¨ la tua presenza nel nostro giorno speciale.  
      Se desideri, puoi contribuire al nostro viaggio di nozze con un bonifico o tramite Revolut.<br><br>
      <strong>Bonifico bancario</strong><br>
      Beneficiario: <strong>Gianluca GuardalÃ </strong><br>
      IBAN: <strong>IT06 K036 6901 6003 5066 1600 911</strong><br>
      BIC: <strong>REVOITM2</strong><br><br>
      <strong>Oppure via Revolut:</strong><br>
      <a href="https://revolut.me/gianluca" target="_blank" style="color:#7465ad;text-decoration:none;border-bottom:1px dotted #7465ad;">revolut.me/gianluca</a>
    </p>
  </div>

  <div class="box">
    <p class="head">ðŸ‡¬ðŸ‡§ English</p>
    <p><strong>Would you like to contribute to our trip?</strong><br>
      Your presence is the greatest gift.  
      If you wish, you can contribute to our honeymoon via bank transfer or Revolut.<br><br>
      <strong>Bank transfer</strong><br>
      Account holder: <strong>Gianluca GuardalÃ </strong><br>
      IBAN: <strong>IT06 K036 6901 6003 5066 1600 911</strong><br>
      BIC: <strong>REVOITM2</strong><br><br>
      <strong>Or via Revolut:</strong><br>
      <a href="https://revolut.me/gianluca" target="_blank" style="color:#7465ad;text-decoration:none;border-bottom:1px dotted #7465ad;">revolut.me/gianluca</a>
    </p>
  </div>

  <div class="box">
    <p class="head">ðŸ‡«ðŸ‡· FranÃ§ais</p>
    <p><strong>Souhaitez-vous contribuer Ã  notre voyage&nbsp;?</strong><br>
      Le plus beau cadeau est votre prÃ©sence Ã  nos cÃ´tÃ©s.  
      Si vous le souhaitez, vous pouvez participer Ã  notre voyage de noces par virement ou via Revolut.<br><br>
      <strong>Virement bancaire</strong><br>
      BÃ©nÃ©ficiaire&nbsp;: <strong>Gianluca GuardalÃ </strong><br>
      IBAN&nbsp;: <strong>IT06 K036 6901 6003 5066 1600 911</strong><br>
      BIC&nbsp;: <strong>REVOITM2</strong><br><br>
      <strong>Ou via Revolut&nbsp;:</strong><br>
      <a href="https://revolut.me/gianluca" target="_blank" style="color:#7465ad;text-decoration:none;border-bottom:1px dotted #7465ad;">revolut.me/gianluca</a>
    </p>
  </div>
</div>

</main>

<footer style="text-align:center;color:#6b6b6b;padding:40px 20px">
  <small>Â© Charlotte &amp; Gianluca â€” 2026</small>
</footer>

<script>
(function(){
  const btn=document.getElementById('hambBtn');
  const menu=document.getElementById('mobileMenu');
  if(btn && menu){
    btn.addEventListener('click', e=>{
      e.stopPropagation();
      menu.style.display = (menu.style.display==='block') ? 'none' : 'block';
    });
    document.addEventListener('click', e=>{
      if(menu.style.display==='block' && !menu.contains(e.target) && e.target!==btn){
        menu.style.display='none';
      }
    });
  }
})();
</script>

<script>
/* ===========================================================
   LISTA INVITATI "VIP" (quelli che vedranno welcome dinner & brunch)
   - Qui normalizziamo i nomi in minuscolo e senza accenti/puntini
   - IMPORTANTE: se aggiungi qualcuno, aggiungilo seguendo questo formato:
     "nome cognome"
     Se il cognome Ã¨ vuoto (tipo "BÃ©nÃ©dict"), metti solo il nome.
   =========================================================== */

const VIP_GUESTS = [
  "charlotte francis",
  "yves francis",
  "laurence hoppe",
  "chloe francis",
  "maya mertens",
  "chiara regalia",
  "matteo biroli",
  "chiara sestini",
  "riccardo magri",
  "marta vitro",
  "mattia marco",
  "andrea rodriguez",
  "piero giuriolo",
  "pietro favari",
  "elisa ferrantelli",
  "francesco santermosi",
  "viviana serdoz",
  "francesca garoia",
  "malve malvestio",
  "attilia la vecchia",
  "stefano de looper",
  "clara simon",
  "marine lesage",
  "thomas hulet",
  "nicola delle foglie",
  "baptiste charvat",
  "liza bibakova",
  "iphigenie loukakis",
  "sara nyssen",
  "koen slingerland",
  "gianluca guardala",      // guardalÃ  â†’ guardala
  "francesca arduini",
  "benedict",               // BÃ©nÃ©dict â†’ benedict
  "isidoro guardala",
  "simona guardala",
  "alessando guardala",
  "irene guardala",
  "patrick guardala",
  "emanuela zannetti",
  "andrea perozziello",
  "ragazza perroz",
  "fabio tarricone",
  "gisella martino capeda",
  "edoardo cutolo",
  "giorgia piras",
  "edoardo papini",
  "vittorio corti",
  "benedetta barbaresi",
  "giacomo gussoni",
  "matteo rossi",
  "lucrezia piracci",
  "davide bellotto",
  "silvia oltrabella",
  "ludovico sibani",        // SÃ¬bani â†’ sibani
  "silvia pignotti",
  "benedetta testoni",
  "giovanni de maria",
  "edoardo ferrario",
  "alessandro bianchi",
  "beatrice villa",
  "luca caravaggi",
  "mara moschino",
  "marzia camapnile",       // campanile?
  "nikola calic",
  "filippo sugla",          // sug|lia -> gestiamolo piÃ¹ robusto sotto
  "camilla russo",
  "laerte adami",
  "noemi",
  "alberto garlaschelli",
  "jacopo guarneri",
  "lorenzo cederna",
  "benedetta pintus"
];

/* Per sicurezza, aggiungiamo una funzione per normalizzare accenti,
   spazi multipli, casi speciali tipo "Suglia" / "Sugla".
   Usiamo una funzione di "slugify" molto semplice.
*/
function normalizeName(str){
  if(!str) return "";
  // minuscolo
  let s = str.toLowerCase().trim();

  // normalizza accenti
  s = s.normalize("NFD").replace(/[\u0300-\u036f]/g, ""); // rimuove diacritici

  // sostituzioni manuali: se vogliamo sistemare errori tipo "suglia" / "sugla"
  s = s.replace(/\bsuglia\b/g,"sugla");
  s = s.replace(/\bguardalÃ \b/g,"guardala");
  s = s.replace(/\bguardalÃ \b/g,"guardala");

  // togli spazi doppi
  s = s.replace(/\s+/g," ");

  return s;
}

/* ===========================================================
   LOGIN LOGICA
   - Mostriamo il popup se NON abbiamo giÃ  salvato lo stato
   - Quando confermano, salviamo in localStorage:
     { guestName: "nome cognome", isVIP: true/false }
   - Se uno fa logout, cancelliamo e ri-mostriamo popup
   - In base a isVIP mostriamo blocchi VIP nelle pagine
   =========================================================== */

const STORAGE_KEY = "weddingGuestInfo"; // localStorage key

function getGuestInfo(){
  try {
    return JSON.parse(localStorage.getItem(STORAGE_KEY)) || null;
  } catch(e){
    return null;
  }
}

function setGuestInfo(obj){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));
}

function clearGuestInfo(){
  localStorage.removeItem(STORAGE_KEY);
}

/* Mostra popup login */
function showLoginModal(){
  const overlay = document.getElementById("guestLoginOverlay");
  const errorMsg = document.getElementById("guestError");
  const logoutBtn = document.getElementById("guestLogoutBtn");

  if(overlay){
    overlay.style.display = "flex";
  }
  if(errorMsg){
    errorMsg.style.display = "none";
  }
  if(logoutBtn){
    logoutBtn.style.display = "none";
  }
}

/* Mostra popup logout (cioÃ¨ "sei loggato, vuoi uscire?") */
function showLogoutModal(guest){
  const overlay = document.getElementById("guestLoginOverlay");
  const modal   = document.getElementById("guestLoginModal");
  const errorMsg= document.getElementById("guestError");
  const first   = document.getElementById("guestFirst");
  const last    = document.getElementById("guestLast");
  const confirm = document.getElementById("guestConfirmBtn");
  const logout  = document.getElementById("guestLogoutBtn");

  if(!overlay||!modal) return;

  // Cambiamo leggermente il testo per dire chi Ã¨ loggato
  modal.querySelector("h2").textContent = guest.guestName;
  modal.querySelector("p").innerHTML = `
    You are signed in.<br>
    Vous Ãªtes connectÃ©(e).<br>
    Sei collegato/a.
  `;

  // Nascondiamo i campi nome/cognome perchÃ© sei giÃ  loggato
  if(first) first.parentElement.style.display = "none";
  if(last)  last.parentElement.style.display  = "none";

  // Nascondi eventuale errore
  if(errorMsg) errorMsg.style.display = "none";

  // Mostra bottone logout
  if(logout) logout.style.display = "block";

  // Cambia testo bottone principale:
  if(confirm) {
    confirm.textContent = "Close / Fermer / Chiudi";
  }

  overlay.style.display = "flex";
}

/* Ripristina il popup in modalitÃ  LOGIN (nomi visibili) */
function resetModalToLogin(){
  const overlay = document.getElementById("guestLoginOverlay");
  const modal   = document.getElementById("guestLoginModal");
  const first   = document.getElementById("guestFirst");
  const last    = document.getElementById("guestLast");
  const confirm = document.getElementById("guestConfirmBtn");
  const logout  = document.getElementById("guestLogoutBtn");
  const errorMsg= document.getElementById("guestError");

  if(!overlay||!modal) return;

  modal.querySelector("h2").textContent = "Welcome Â· Bienvenue Â· Benvenuti";
  modal.querySelector("p").innerHTML = `
    Please enter your first and last name.<br>
    Veuillez saisir votre prÃ©nom et nom.<br>
    Inserisci nome e cognome.
  `;

  // Mostra campi
  if(first) {
    first.parentElement.style.display = "block";
    first.value = "";
  }
  if(last) {
    last.parentElement.style.display  = "block";
    last.value = "";
  }

  // Nascondi messaggio errore
  if(errorMsg) errorMsg.style.display="none";

  // Bottone principale "OK"
  if(confirm){
    confirm.textContent = "OK";
  }

  // Nascondi logout
  if(logout){
    logout.style.display = "none";
  }
}

/* Prova login */
function tryLogin(){
  const first = document.getElementById("guestFirst").value || "";
  const last  = document.getElementById("guestLast").value  || "";
  const errorMsg = document.getElementById("guestError");
  const overlay  = document.getElementById("guestLoginOverlay");

  const fullNameNormalized = normalizeName(first + " " + last);

  // Controllo se il nome Ã¨ nella lista VIP
  const isVIP = VIP_GUESTS.includes(fullNameNormalized);

  // Salviamo comunque anche se non VIP,
  // cosÃ¬ chi non Ã¨ in lista puÃ² navigare il sito senza rivedere il popup ogni volta
  if(fullNameNormalized.length < 2){
    // nome troppo corto
    if(errorMsg){
      errorMsg.style.display = "block";
    }
    return;
  }

  // Salva stato in localStorage
  setGuestInfo({
    guestName: first.trim() + " " + last.trim(),
    isVIP: isVIP
  });

  // Chiudi overlay
  if(overlay){
    overlay.style.display = "none";
  }

  // Ora che sappiamo se Ã¨ VIP, mostriamo eventuali sezioni VIP
  revealVIPSections(isVIP);
}

/* Logout */
function logoutGuest(){
  clearGuestInfo();
  resetModalToLogin();
  // Dopo il logout, ri-mostriamo in versione LOGIN
  showLoginModal();
  // Nascondiamo sezioni VIP per sicurezza
  revealVIPSections(false);
}

/* Mostra/nascondi le sezioni VIP nella pagina corrente */
function revealVIPSections(isVIP){
  const vipEls = document.querySelectorAll(".vip-only");
  vipEls.forEach(el=>{
    el.style.display = isVIP ? "" : "none";
  });
}

/* Setup iniziale quando la pagina carica */
document.addEventListener("DOMContentLoaded", function(){

  const overlay  = document.getElementById("guestLoginOverlay");
  const confirm  = document.getElementById("guestConfirmBtn");
  const logout   = document.getElementById("guestLogoutBtn");

  // 1. Leggi dal localStorage se c'Ã¨ giÃ  un ospite
  const info = getGuestInfo();

  if(info){
    // Abbiamo giÃ  un utente
    // - NON mostriamo il popup subito
    // - ma mostriamo/nascondiamo blocchi VIP
    revealVIPSections(!!info.isVIP);

    // Aggiungiamo listener sul brand (o su qualcosa) per poter riaprire popup e fare logout
    // Suggerimento: click sul nome in header apre modal logout
    const brand = document.querySelector(".brand");
    if(brand){
      brand.style.cursor = "pointer";
      brand.addEventListener("click", ()=>{
        showLogoutModal(info);
      });
    }

  } else {
    // Nessun utente noto -> mostriamo subito popup in modalitÃ  LOGIN
    resetModalToLogin();
    showLoginModal();
  }

  // Listener "OK" nel popup (fa login o chiude se giÃ  loggato)
  if(confirm){
    confirm.addEventListener("click", ()=>{
      const currentInfo = getGuestInfo();
      if(currentInfo){
        // se sei giÃ  loggato e stai vedendo popup "sei collegato"
        // chiudiamo semplicemente
        if(overlay) overlay.style.display="none";
      } else {
        // stai cercando di loggarti
        tryLogin();
      }
    });
  }

  // Listener "Logout"
  if(logout){
    logout.addEventListener("click", ()=>{
      logoutGuest();
    });
  }

  // Se clicchi fuori dal box, chiudi SOLO se giÃ  loggato
  if(overlay){
    overlay.addEventListener("click", (e)=>{
      if(e.target===overlay){
        const currentInfo = getGuestInfo();
        // se NON loggato non chiudere
        if(currentInfo){
          overlay.style.display="none";
        }
      }
    });
  }
});
</script>

  
</body>
</html>
